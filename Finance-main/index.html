<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-21XPVF0G1Q"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-21XPVF0G1Q');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organizador de Finanzas Personal</title>

    <!-- PWA Meta Tags -->
    <meta name="description" content="Organiza tus ingresos y gastos de forma inteligente">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Finanzas">

    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="icon-192.png">

    <!-- External CSS -->
    <link rel="stylesheet" href="styles.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Skip navigation for accessibility -->
    <a href="#main-content" class="skip-nav">Saltar al contenido principal</a>

    <!-- RECUADRO DE VERSION -->
    <div class="version-banner" id="version-banner">
        <button class="version-close" onclick="document.getElementById('version-banner').style.display='none'" title="Cerrar" aria-label="Cerrar banner">&times;</button>
        <h3>
            <span class="version-badge">v3.0.0</span>
            &iexcl;PWA Instalable Activada!
        </h3>
        <p>&#x1F4F1; Instala la app en tu tel&eacute;fono + &#x26A1; Funciona offline + &#x1F3A8; Modo standalone</p>
    </div>

    <!-- PANEL DE NOTIFICACIONES/RECORDATORIOS -->
    <div id="notificaciones-panel" style="display: none;"></div>

    <div class="container" id="main-content">
        <h1><span class="emoji">&#x1F4B0;</span> Organizador de Finanzas</h1>
        <p class="subtitle">Organiza tus ingresos y gastos de forma inteligente</p>


        <!-- BARRA DE CONTROL DE PRESUPUESTOS -->
        <div class="barra-presupuestos">
            <div class="presupuesto-row">
                <div class="selector-container">
                    <label class="presupuesto-label">
                        &#x1F4C5; Presupuesto:
                        <span class="help-icon">?
                            <span class="tooltip">Crea presupuestos separados para cada mes. Tus datos se guardan autom&aacute;ticamente. Usa "Copiar" para duplicar un mes completo en segundos.</span>
                        </span>
                    </label>
                    <select id="presupuesto-selector" onchange="cambiarPresupuesto()">
                    </select>
                </div>
                <div class="botones-container">
                    <button onclick="nuevoPresupuesto()" class="btn-presupuesto btn-nuevo">&#x1F195; Nuevo</button>
                    <button onclick="copiarPresupuesto()" class="btn-presupuesto btn-copiar">&#x1F4CB; Copiar</button>
                    <button onclick="eliminarPresupuesto()" class="btn-presupuesto btn-eliminar">&#x1F5D1;&#xFE0F; Eliminar</button>
                    <button onclick="limpiarTodo()" class="btn-presupuesto" style="background: #ff9800;">&#x1F9F9; Limpiar Todo</button>
                </div>
            </div>
            <div id="autosave-indicator">&#x1F4BE; Guardado autom&aacute;ticamente</div>
        </div>

<!-- AYUDA GENERAL COLAPSABLE -->
        <div class="collapsible-help">
            <div class="collapsible-header" onclick="toggleHelp(this)">
                <span>&#x2753; &iquest;C&oacute;mo usar esta aplicaci&oacute;n?</span>
                <span class="arrow">&#x25BC;</span>
            </div>
            <div class="collapsible-content">
                <h3 style="color: #667eea; margin-bottom: 15px;">&#x1F4CB; Gu&iacute;a R&aacute;pida</h3>

                <p style="margin-bottom: 15px;"><strong>Paso 1: Ingresos</strong></p>
                <p style="color: #666; margin-bottom: 15px;">Define cu&aacute;ndo recibes dinero (d&iacute;a 15, 30, etc.) y cu&aacute;nto ($800, $1,200, etc.)</p>

                <p style="margin-bottom: 15px;"><strong>Paso 2: Gastos Fijos</strong></p>
                <p style="color: #666; margin-bottom: 15px;">Agrega tus gastos mensuales: Agua, Luz, Internet, Renta, etc. con su d&iacute;a de vencimiento.</p>

                <p style="margin-bottom: 15px;"><strong>Paso 3: Tarjetas (Opcional)</strong></p>
                <p style="color: #666; margin-bottom: 15px;">Si tienes tarjetas de cr&eacute;dito, pon el pago m&iacute;nimo y cu&aacute;nto debes.</p>

                <p style="margin-bottom: 15px;"><strong>Paso 4: Calcular</strong></p>
                <p style="color: #666; margin-bottom: 15px;">Click en "&#x1F9EE; CALCULAR" y ver&aacute;s tu plan financiero completo.</p>

                <div class="quick-tip" style="margin-top: 15px;">
                    Todos los campos con <span class="help-icon" style="display: inline-flex; vertical-align: middle;">?</span> tienen ayuda adicional. Pasa el mouse sobre ellos.
                </div>
            </div>
        </div>

        <!-- SECCION DE INGRESOS -->
        <div class="section">
            <h2 class="section-title">
                <span class="emoji">&#x1F4B5;</span> Tus Ingresos y Capital
                <span class="help-icon">?
                    <span class="tooltip">Aqu&iacute; defines cu&aacute;ndo y cu&aacute;nto dinero recibes cada mes. Esto es la base de tu presupuesto.</span>
                </span>
            </h2>

            <div class="example-box">
                <h4>&#x1F4DD; Ejemplo:</h4>
                <ul>
                    <li>PayCheck 1: D&iacute;a 15 &rarr; $800</li>
                    <li>PayCheck 2: D&iacute;a 30 &rarr; $800</li>
                    <li>Balance actual: $150 (lo que tienes ahora)</li>
                </ul>
            </div>

            <!-- BALANCE ACTUAL (OPCIONAL) -->
            <div style="background: #e8f5e9; padding: 20px; border-radius: 10px; margin-bottom: 25px; border-left: 5px solid #51cf66;">
                <h3 style="color: #37b24d; margin-bottom: 15px;">
                    &#x1F4B0; &iquest;Tienes dinero guardado?
                    <span class="help-icon">?
                        <span class="tooltip">Dinero disponible AHORA (banco o efectivo). Si no tienes, d&eacute;jalo en 0.</span>
                    </span>
                </h3>
                <p style="color: #666; margin-bottom: 15px; font-size: 0.9em;">
                    Si tienes dinero guardado, el sistema lo usar&aacute; para pagar gastos que vencen antes de tu primer pago.
                </p>
                <div class="input-group">
                    <label>&#x1F4B5; Dinero disponible ahora</label>
                    <input type="number" id="balance-actual" min="0" step="0.01" placeholder="0.00" value="0">
                </div>
                <div class="quick-tip">
                    Ejemplo: Si tienes $100 en el banco, escribe 100. Si no tienes nada, deja 0.
                </div>
            </div>

            <!-- META DE AHORRO -->
            <div style="background: #fff3e0; padding: 20px; border-radius: 10px; margin-bottom: 25px; border-left: 5px solid #ff9800;">
                <h3 style="color: #f57c00; margin-bottom: 15px;">&#x1F3AF; &iquest;Quieres ahorrar?</h3>
                <p style="color: #666; margin-bottom: 15px; font-size: 0.9em;">
                    Dime cu&aacute;nto quieres ahorrar y el sistema te dir&aacute; cu&aacute;nto guardar cada mes.
                </p>

                <!-- Opciones de ahorro -->
                <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                    <label style="display: flex; align-items: center; margin-bottom: 10px; cursor: pointer;">
                        <input type="radio" name="tipo-ahorro" value="mensual" checked onclick="cambiarTipoAhorro('mensual')" style="margin-right: 10px;">
                        <strong>Ahorrar cada mes</strong> <span style="color: #666; margin-left: 5px;">(la misma cantidad siempre)</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer;">
                        <input type="radio" name="tipo-ahorro" value="fecha" onclick="cambiarTipoAhorro('fecha')" style="margin-right: 10px;">
                        <strong>Ahorrar para una fecha</strong> <span style="color: #666; margin-left: 5px;">(vacaciones, emergencias, etc.)</span>
                    </label>
                </div>

                <!-- Modo: Ahorro Mensual Fijo -->
                <div id="ahorro-mensual" style="display: block;">
                    <div class="input-group">
                        <label>&#x1F48E; &iquest;Cu&aacute;nto quieres ahorrar cada mes?</label>
                        <input type="number" id="meta-ahorro" min="0" step="0.01" placeholder="200.00" oninput="calcularAhorroMensual()">
                    </div>
                </div>

                <!-- Modo: Ahorro con Fecha -->
                <div id="ahorro-fecha" style="display: none;">
                    <div class="input-group">
                        <label>&#x1F4B0; &iquest;Cu&aacute;nto necesitas juntar?</label>
                        <input type="number" id="meta-total" min="0" step="0.01" placeholder="2000.00" oninput="calcularAhorroConFecha()">
                    </div>
                    <div class="input-group">
                        <label>&#x1F4C5; &iquest;Para cu&aacute;ndo?</label>
                        <input type="date" id="fecha-objetivo" oninput="calcularAhorroConFecha()" style="width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 1em;">
                    </div>

                    <!-- Resultado del calculo -->
                    <div id="resultado-calculo" style="display: none; background: #e8f5e9; padding: 15px; border-radius: 8px; margin-top: 15px; border-left: 4px solid #4caf50;">
                        <div style="font-size: 0.95em; color: #2e7d32; margin-bottom: 10px;">
                            &#x1F4CA; <strong>Tu plan:</strong>
                        </div>
                        <div id="info-calculo"></div>
                    </div>
                </div>
            </div>

            <!-- SELECTOR DE TIPO DE PAGO -->
            <div style="background: #f0f4ff; padding: 20px; border-radius: 10px; margin-bottom: 25px; border-left: 5px solid #667eea;">
                <h3 style="color: #667eea; margin-bottom: 15px;">&#x1F4C5; &iquest;Con qu&eacute; frecuencia cobras?</h3>
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; cursor: pointer; background: white; padding: 15px 25px; border-radius: 10px; border: 2px solid #667eea; flex: 1; min-width: 200px;">
                        <input type="radio" name="tipo-pago" value="quincenal" checked onclick="cambiarTipoPago('quincenal')" style="margin-right: 10px; transform: scale(1.3);">
                        <div>
                            <strong style="color: #667eea; font-size: 1.1em;">Quincenal</strong>
                            <div style="color: #666; font-size: 0.9em;">Cobro cada 15 d&iacute;as (2 veces al mes)</div>
                        </div>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; background: white; padding: 15px 25px; border-radius: 10px; border: 2px solid #e0e0e0; flex: 1; min-width: 200px;">
                        <input type="radio" name="tipo-pago" value="semanal" onclick="cambiarTipoPago('semanal')" style="margin-right: 10px; transform: scale(1.3);">
                        <div>
                            <strong style="color: #667eea; font-size: 1.1em;">Semanal</strong>
                            <div style="color: #666; font-size: 0.9em;">Cobro cada semana (4 veces al mes)</div>
                        </div>
                    </label>
                </div>
            </div>

            <h3 style="color: #667eea; margin-bottom: 15px;">PayCheck 1</h3>
            <div class="row">
                <div class="input-group">
                    <label>&#x1F4C5; Mes</label>
                    <select id="mes-pago1" style="width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 1em; background: white;">
                        <option value="1">Enero</option>
                        <option value="2" selected>Febrero</option>
                        <option value="3">Marzo</option>
                        <option value="4">Abril</option>
                        <option value="5">Mayo</option>
                        <option value="6">Junio</option>
                        <option value="7">Julio</option>
                        <option value="8">Agosto</option>
                        <option value="9">Septiembre</option>
                        <option value="10">Octubre</option>
                        <option value="11">Noviembre</option>
                        <option value="12">Diciembre</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>&#x1F4C5; D&iacute;a del mes</label>
                    <input type="number" id="dia-pago1" min="1" max="31" placeholder="15">
                </div>
            </div>
            <div class="input-group">
                <label>&#x1F4B0; Cu&aacute;nto cobro</label>
                <input type="number" id="monto-pago1" min="0" step="0.01" placeholder="800.00">
            </div>

            <h3 style="color: #667eea; margin-bottom: 15px; margin-top: 25px;">PayCheck 2</h3>
            <div class="row">
                <div class="input-group">
                    <label>&#x1F4C5; Mes</label>
                    <select id="mes-pago2" style="width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 1em; background: white;">
                        <option value="1">Enero</option>
                        <option value="2" selected>Febrero</option>
                        <option value="3">Marzo</option>
                        <option value="4">Abril</option>
                        <option value="5">Mayo</option>
                        <option value="6">Junio</option>
                        <option value="7">Julio</option>
                        <option value="8">Agosto</option>
                        <option value="9">Septiembre</option>
                        <option value="10">Octubre</option>
                        <option value="11">Noviembre</option>
                        <option value="12">Diciembre</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>&#x1F4C5; D&iacute;a del mes</label>
                    <input type="number" id="dia-pago2" min="1" max="31" placeholder="30">
                </div>
            </div>
            <div class="input-group">
                <label>&#x1F4B0; Cu&aacute;nto cobro</label>
                <input type="number" id="monto-pago2" min="0" step="0.01" placeholder="800.00">
            </div>

            <!-- PAYCHECKS 3 Y 4 - SOLO PARA PAGO SEMANAL -->
            <div id="paychecks-semanales" style="display: none;">

                <h3 style="color: #667eea; margin-bottom: 15px; margin-top: 25px;">PayCheck 3</h3>
                <div class="row">
                    <div class="input-group">
                        <label>&#x1F4C5; Mes</label>
                        <select id="mes-pago3" style="width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 1em; background: white;">
                            <option value="1">Enero</option>
                            <option value="2" selected>Febrero</option>
                            <option value="3">Marzo</option>
                            <option value="4">Abril</option>
                            <option value="5">Mayo</option>
                            <option value="6">Junio</option>
                            <option value="7">Julio</option>
                            <option value="8">Agosto</option>
                            <option value="9">Septiembre</option>
                            <option value="10">Octubre</option>
                            <option value="11">Noviembre</option>
                            <option value="12">Diciembre</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>&#x1F4C5; D&iacute;a del mes</label>
                        <input type="number" id="dia-pago3" min="1" max="31" placeholder="15">
                    </div>
                </div>
                <div class="input-group">
                    <label>&#x1F4B0; Cu&aacute;nto cobro</label>
                    <input type="number" id="monto-pago3" min="0" step="0.01" placeholder="400.00">
                </div>

                <h3 style="color: #667eea; margin-bottom: 15px; margin-top: 25px;">PayCheck 4</h3>
                <div class="row">
                    <div class="input-group">
                        <label>&#x1F4C5; Mes</label>
                        <select id="mes-pago4" style="width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 1em; background: white;">
                            <option value="1">Enero</option>
                            <option value="2" selected>Febrero</option>
                            <option value="3">Marzo</option>
                            <option value="4">Abril</option>
                            <option value="5">Mayo</option>
                            <option value="6">Junio</option>
                            <option value="7">Julio</option>
                            <option value="8">Agosto</option>
                            <option value="9">Septiembre</option>
                            <option value="10">Octubre</option>
                            <option value="11">Noviembre</option>
                            <option value="12">Diciembre</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>&#x1F4C5; D&iacute;a del mes</label>
                        <input type="number" id="dia-pago4" min="1" max="31" placeholder="22">
                    </div>
                </div>
                <div class="input-group">
                    <label>&#x1F4B0; Cu&aacute;nto cobro</label>
                    <input type="number" id="monto-pago4" min="0" step="0.01" placeholder="400.00">
                </div>

            </div>
        </div>

        <!-- SECCION DE GASTOS VARIABLES (GASOLINA Y COMIDA) -->
        <div class="section" style="border-left-color: #51cf66;">
            <h2 class="section-title">
                <span class="emoji">&#x1F697;</span> Gastos Variables del Mes
                <span class="help-icon">?
                    <span class="tooltip">Gastos que var&iacute;an cada mes como gasolina y comida. Se distribuyen autom&aacute;ticamente entre tus paychecks.</span>
                </span>
            </h2>

            <div class="help-text">
                <strong>&#x1F4A1; Tip:</strong>
                Estos gastos se dividen autom&aacute;ticamente entre tus paychecks. Por ejemplo: $400 de gasolina = $200 por paycheck (quincenal) o $100 por paycheck (semanal).
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                <!-- Gasolina -->
                <div style="background: white; padding: 20px; border-radius: 12px; border: 2px solid #51cf66;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                        <span style="font-size: 2em;">&#x26FD;</span>
                        <h3 style="margin: 0; color: #51cf66; font-size: 1.2em;">Gasolina</h3>
                    </div>
                    <div class="input-group">
                        <label>&#x1F4B0; Presupuesto mensual ($)</label>
                        <input type="number" id="gasto-gasolina" class="servicio-monto-sin-dia" data-nombre="Gasolina" min="0" step="0.01" placeholder="400.00" style="border: 2px solid #51cf66;">
                        <small style="color: #666; font-size: 0.85em; display: block; margin-top: 5px;">Cu&aacute;nto gastas al mes en gasolina</small>
                    </div>
                </div>

                <!-- Comida -->
                <div style="background: white; padding: 20px; border-radius: 12px; border: 2px solid #ff9800;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                        <span style="font-size: 2em;">&#x1F354;</span>
                        <h3 style="margin: 0; color: #ff9800; font-size: 1.2em;">Comida/Despensa</h3>
                    </div>
                    <div class="input-group">
                        <label>&#x1F4B0; Presupuesto mensual ($)</label>
                        <input type="number" id="gasto-comida" class="servicio-monto-sin-dia" data-nombre="Comida/Despensa" min="0" step="0.01" placeholder="600.00" style="border: 2px solid #ff9800;">
                        <small style="color: #666; font-size: 0.85em; display: block; margin-top: 5px;">Cu&aacute;nto gastas al mes en comida</small>
                    </div>
                </div>
            </div>

            <div style="background: #e8f5e9; padding: 15px; border-radius: 10px; margin-top: 20px; border-left: 4px solid #4caf50;">
                <strong style="color: #2e7d32;">&#x1F4CA; Distribuci&oacute;n autom&aacute;tica:</strong>
                <p style="margin: 8px 0 0 0; color: #1b5e20; font-size: 0.9em;">
                    El sistema divide estos gastos entre tus paychecks autom&aacute;ticamente.
                    <strong>No necesitas poner d&iacute;a de vencimiento</strong> porque son gastos continuos del mes.
                </p>
            </div>
        </div>

        <!-- SECCION DE GASTOS FIJOS -->
        <div class="section">
            <h2 class="section-title">
                <span class="emoji">&#x1F4B3;</span> Tus Gastos Fijos Mensuales
                <span class="help-icon">?
                    <span class="tooltip">Gastos que se repiten cada mes: Agua, Luz, Internet, Renta, Seguros, etc.</span>
                </span>
            </h2>

            <div class="example-box">
                <h4>&#x1F4DD; Ejemplos de gastos fijos:</h4>
                <ul>
                    <li>&#x1F4A7; Agua: $45, D&iacute;a 15, Todos los meses</li>
                    <li>&#x1F4A1; Luz: $135, D&iacute;a 20, Todos los meses</li>
                    <li>&#x1F4E1; Internet: $60, D&iacute;a 14, Todos los meses</li>
                    <li>&#x1F3E0; Renta: $800, D&iacute;a 1, Todos los meses</li>
                </ul>
            </div>

            <div class="help-text">
                <strong>&#x1F4A1; Tip:</strong>
                Puedes agregar tantos gastos como necesites. Click en "&#x2795; Agregar Gasto Fijo" para cada uno.
            </div>

            <div style="overflow-x: auto; margin-bottom: 15px;">
                <table class="tabla-gastos-fijos">
                    <thead>
                        <tr>
                            <th style="width: 20%;" onclick="ordenarTablaGastosFijos('nombre')" title="Click para ordenar">Nombre</th>
                            <th style="width: 15%;" onclick="ordenarTablaGastosFijos('monto')" title="Click para ordenar">Monto ($)</th>
                            <th style="width: 10%;" onclick="ordenarTablaGastosFijos('dia')" title="Click para ordenar">D&iacute;a</th>
                            <th style="width: 20%;">Mes</th>
                            <th style="width: 20%;">Recurrencia</th>
                            <th style="width: 15%; text-align: center;"></th>
                        </tr>
                    </thead>
                    <tbody id="tabla-gastos-fijos-body">
                        <!-- Las filas se agregar&aacute;n din&aacute;micamente aqu&iacute; -->
                    </tbody>
                </table>
            </div>

            <button class="btn-agregar-fila" onclick="agregarFilaGastoFijo(); return false;">&#x2795; Agregar Gasto Fijo</button>
        </div>

        <!-- SECCION DE TARJETAS DE CREDITO -->
        <div class="section" style="border-left-color: #667eea;">
            <h2 class="section-title">
                <span class="emoji">&#x1F4B3;</span> Tarjetas de Cr&eacute;dito
                <span class="help-icon">?
                    <span class="tooltip">El sistema calcula cu&aacute;nto debes pagar a cada tarjeta seg&uacute;n tu dinero disponible, priorizando las m&aacute;s importantes.</span>
                </span>
            </h2>

            <div class="example-box">
                <h4>&#x1F4DD; Ejemplo:</h4>
                <ul>
                    <li>Visa: Pago m&iacute;nimo $50, Debes $1,500, Vence d&iacute;a 15</li>
                    <li>Mastercard: Pago m&iacute;nimo $30, Debes $800, Vence d&iacute;a 20</li>
                </ul>
            </div>

            <div class="quick-tip">
                El sistema SIEMPRE pagar&aacute; el m&iacute;nimo. Si te sobra dinero, pagar&aacute; m&aacute;s para reducir tu deuda m&aacute;s r&aacute;pido.
            </div>

            <div class="gasto-categoria" style="border: 2px solid #667eea; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                <div class="gasto-header" style="background: #667eea; color: white; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <input type="text" class="tarjeta-nombre" placeholder="Visa" style="border: none; background: transparent; color: white; font-weight: bold; font-size: 1.1em; width: 100%;">
                </div>
                <div class="row">
                    <div class="input-group">
                        <label>&#x1F4B0; Pago m&iacute;nimo</label>
                        <input type="number" class="tarjeta-minimo" min="0" step="0.01" placeholder="50.00" style="border: 2px solid #ffd43b;">
                        <small style="color: #666; font-size: 0.85em; display: block; margin-top: 5px;">Lo m&iacute;nimo que pide la tarjeta</small>
                    </div>
                    <div class="input-group">
                        <label>&#x1F4B3; Cu&aacute;nto debes en total</label>
                        <input type="number" class="tarjeta-deuda" min="0" step="0.01" placeholder="1500.00" style="border: 2px solid #ff6b6b;">
                    </div>
                </div>
                <div class="row">
                    <div class="input-group">
                        <label>&#x1F4C5; Mes</label>
                        <select class="tarjeta-mes" style="width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 1em; background: white;">
                            <option value="todos">Todos</option>
                            <option value="1">Enero</option>
                            <option value="2">Febrero</option>
                            <option value="3">Marzo</option>
                            <option value="4">Abril</option>
                            <option value="5">Mayo</option>
                            <option value="6">Junio</option>
                            <option value="7">Julio</option>
                            <option value="8">Agosto</option>
                            <option value="9">Septiembre</option>
                            <option value="10">Octubre</option>
                            <option value="11">Noviembre</option>
                            <option value="12">Diciembre</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>&#x1F4C5; D&iacute;a que vence</label>
                        <input type="number" class="tarjeta-dia" min="1" max="31" placeholder="15">
                    </div>
                </div>
            </div>

            <div id="tarjetas-container"></div>
            <button class="btn-add" onclick="agregarTarjeta()">&#x2795; Agregar Otra Tarjeta de Cr&eacute;dito</button>
        </div>


        <!-- SECCION DE MISCELANEOS -->
        <div class="section" style="border-left-color: #ffd43b;">
            <h2 class="section-title" style="color: #f59f00;"><span class="emoji">&#x1F3AF;</span> Gastos Miscel&aacute;neos (Variables)</h2>
            <p style="color: #666; margin-bottom: 20px; font-size: 0.95em;">
                Gastos extras como salidas, regalos, antojos, emergencias, etc. que no son fijos pero que debes considerar.
            </p>
            <div id="miscelaneos-container"></div>
            <button class="btn-add" onclick="agregarMiscelaneo()" style="background: #ffd43b; color: #333;">&#x2795; Agregar Miscel&aacute;neo</button>
        </div>

        <!-- SECCION DE GASTOS IMPREVISTOS -->
        <div class="section" style="border-left-color: #ff6b6b;">
            <h2 class="section-title" style="color: #ff6b6b;"><span class="emoji">&#x1F6A8;</span> Gastos Imprevistos (Solo Este Mes)</h2>
            <p style="color: #666; margin-bottom: 20px; font-size: 0.95em;">
                Gastos &uacute;nicos que NO se repiten cada mes: cumplea&ntilde;os, viajes, emergencias m&eacute;dicas, reparaciones, etc.
            </p>
            <div id="imprevistos-container"></div>
            <button class="btn-add" onclick="agregarImprevisto()" style="background: #ff6b6b; color: white;">&#x2795; Agregar Gasto Imprevisto</button>
        </div>

        <!-- BOTON CALCULAR -->

        <!-- MENSAJES DE ERROR/EXITO -->
        <div id="error-container" class="error-message">
            <strong>&#x26A0;&#xFE0F; Hay algunos problemas:</strong>
            <ul id="error-list"></ul>
        </div>

        <div id="success-container" class="success-message">
            &#x2705; &iexcl;Perfecto! Todos los datos son v&aacute;lidos.
        </div>

        <button class="btn-calculate" onclick="calcularFinanzas()">&#x1F9EE; CALCULAR MI PLAN FINANCIERO</button>

        <button
    onclick="verHistorial()"
    class="btn-secondary"
    style="display: block; margin: 20px auto; min-width: 200px;">
    &#x1F4C2; VER MESES ANTERIORES
          </button>


        <!-- RESULTADOS -->
        <div id="resultado" class="resultado"></div>

        <!-- Modal para Historial de Meses -->
        <div id="modalHistorial" class="modal" role="dialog" aria-modal="true">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 style="color: #667eea; margin: 0;">&#x1F4C2; Historial de Meses Guardados</h2>
                    <button class="modal-close" onclick="cerrarModal('modalHistorial')" aria-label="Cerrar ventana">&#x2715;</button>
                </div>
                <div id="historialContent"></div>
            </div>
        </div>

        <!-- Modal para Comparacion de Meses -->
        <div id="modalComparacion" class="modal" role="dialog" aria-modal="true">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 style="color: #667eea; margin: 0;">&#x1F4CA; Comparaci&oacute;n de Meses</h2>
                    <button class="modal-close" onclick="cerrarModal('modalComparacion')" aria-label="Cerrar ventana">&#x2715;</button>
                </div>
                <div class="chart-container">
                    <canvas id="comparacionChart"></canvas>
                </div>
                <div id="comparacionStats" style="margin-top: 20px;"></div>
            </div>
        </div>

        <!-- Modal para Progreso de Ahorro -->
        <div id="modalProgreso" class="modal" role="dialog" aria-modal="true">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 style="color: #4caf50; margin: 0;">&#x1F4CA; Progreso de Ahorro con Objetivo</h2>
                    <button class="modal-close" onclick="cerrarModal('modalProgreso')" aria-label="Cerrar ventana">&#x2715;</button>
                </div>
                <div id="progresoContent"></div>
            </div>
        </div>
    </div>

    <!-- CONTACT FOOTER -->
    <footer class="contact-footer">
        <div class="footer-box">
            <div class="footer-creator">
                &#x1F4BB; Created by <strong>Ismael Bigio</strong>
            </div>
            <div class="footer-contact">
                Para contactar para sugerencias o preguntas:
                <a href="mailto:bigio_tec@me.com">bigio_tec@me.com</a>
            </div>
            <div class="footer-version">
                v3.0.0 &mdash; Febrero 2026
            </div>
        </div>
    </footer>

    <!-- App JavaScript -->
    <script src="app.js"></script>
</body>
</html>
